# X-Tracker 产品文档

## 1. 产品概述 (Product Overview)

**X-Tracker** 是一款专为 X、微博 (Weibo) 和雪球 (Xueqiu) 用户打造的高效信息聚合与监控 Chrome 扩展程序。它旨在解决用户在海量信息流中难以聚焦关注核心内容的问题。通过侧边栏 (Side Panel) 的形式，X-Tracker 允许用户创建自定义的关注列表，按需筛选特定时间范围内的推文/动态，并提供无缝的浏览体验。

不同于传统的 Timeline，X-Tracker 就像您的私人情报中心，让您可以“只看想看的人，只读想读的内容”。

## 2. 核心功能 (Core Features)

### 2.0 多平台支持 (Multi-Platform Support) [New]
- **X & 雪球 (Xueqiu)**：支持完整的内容抓取、聚合与时间筛选功能。
- **微博 (Weibo) & 小红书 (Xiaohongshu) 快速访问**：由于平台限制，提供“一键直达”功能。在侧边栏中管理关注列表，点击 Fetch 时会自动在后台为您批量打开选中博主的个人主页。
- **分页管理 (Tabbed Interface)**：通过顶部的标签页（X / Weibo / Xueqiu / Xiaohongshu）分类管理不同平台的用户，界面更加清爽有序。
- **别名系统 (Alias System)**：支持为用户设置备注名（Alias）。
- **智能识别**：添加用户时，系统会自动根据输入内容（URL 或中文昵称）识别平台并归类到对应的标签页下。

### 2.1 全局侧边栏 (Global Side Panel)
- **随时唤起**：基于 Chrome Side Panel API 构建，用户可以在浏览器的任意页面（不仅仅是 X.com）通过点击扩展图标唤起侧边栏。
- **不打断浏览**：侧边栏独立于主页面运行，用户可以在浏览其他网页的同时，实时查看 X 上的动态。

### 2.2 智能用户管理 (Smart User Management)
- **快速添加**：支持通过输入用户名（如 `naval`）或个人主页链接（如 `https://x.com/naval`）快速添加监控对象。
- **别名设置**：给关注者起一个好记的名字，不再被复杂的 ID 困扰。
- **灵活筛选**：用户列表中包含复选框，用户可以随时勾选或取消勾选特定用户，灵活组合需要监控的目标。
- **数据持久化**：所有关注列表和筛选状态均通过 `chrome.storage.local` 本地存储。

### 2.3 高级推文筛选 (Advanced Tweet Filtering)
- **时间范围控制**：支持一键筛选“过去24小时”、“过去3天”或“过去7天”的推文，帮助用户快速补课或聚焦最新热点。
- **回复过滤 (Replies)**：提供“包含回复”开关。关闭时仅显示原创推文，开启时则包含回复内容，满足不同深度的阅读需求。
- **详细回复标记**：对于回复类型的推文，系统会精确显示 `Replying to @username` 标记，帮助用户快速理解对话上下文。

### 2.4 优化的阅读体验 (Optimized Reading Experience)
- **极简信息展示**：为了提供最纯粹的阅读体验，推文卡片仅展示用户昵称（隐藏冗余的 @handle），让视觉更聚焦于内容本身。
- **左对齐布局**：采用符合阅读习惯的左对齐列表设计，视觉更加整洁。
- **防盗链头像加载**：内置图像代理机制，智能处理 X.com 的图片防盗链限制。
- **沉浸式 UI**：参考 DeepSider 等优秀工具的设计语言，采用清爽的卡片式布局，配备 "Hi, It’s a new day." 等人性化问候语。
- **一键跳转**：每条推文均提供 "View on X" 按钮，点击即可跳转至原推文详情页进行互动。

## 3. 技术架构 (Technical Architecture)

X-Tracker 采用最新的 **Manifest V3** 标准开发，确保了扩展的安全性和性能。

- **Side Panel API**：利用 `chrome.sidePanel` 实现与浏览器原生体验融合的侧边栏界面。
- **Scripting API**：使用 `chrome.scripting` 在必要时与页面进行轻量级交互。
- **Background Service Worker**：
  - 处理跨域请求，特别是通过 `fetch` 获取图片 Blob 并转换为 Base64，彻底解决第三方页面引用 X 头像破损的问题。
  - 管理扩展的生命周期。
- **安全性 (Security)**：
  - **CSP 合规**：严格遵循 CSP 规范，移除内联事件处理。
  - **XSS 防护**：对所有渲染的推文内容、用户名及回复标记进行严格的 HTML 转义处理，防止恶意脚本注入。

## 4. 安装指南 (Installation Guide)

由于本产品目前处于开发/内测阶段，请按照以下步骤安装：

1.  下载 X-Tracker 源代码包并解压。
2.  在 Chrome 浏览器地址栏输入 `chrome://extensions/` 并回车。
3.  开启右上角的 **"开发者模式" (Developer mode)** 开关。
4.  点击左上角的 **"加载已解压的扩展程序" (Load unpacked)** 按钮。
5.  选择解压后的 `x-tracker-extension` 文件夹。
6.  安装完成后，建议将 X-Tracker 图标固定在浏览器工具栏以便随时使用。

## 5. 使用说明 (User Guide)

1.  **启动**：点击浏览器右上角的 X-Tracker 图标，侧边栏将从右侧滑出。
2.  **添加关注**：在顶部输入框输入 X 用户名（例如 `elonmusk`）、微博昵称（例如 `央视新闻`）、雪球用户（例如 `但斌`）或小红书链接，点击 `Add` 按钮。
3.  **调整视图**：
    - 在顶部标签页切换平台（X / Weibo / Xueqiu / Xiaohongshu）。
    - 在列表中勾选您想查看的用户，支持点击铅笔图标修改备注。
    - 在底部设置栏选择时间范围（默认 24h）。
4.  **获取内容**：点击底部的 **"Fetch"** 按钮：
    - **X/雪球**：自动抓取并聚合显示内容。
    - **微博/小红书**：自动在后台打开选中博主的主页。
5.  **设置与刷新**：顶部导航栏提供设置按钮（齿轮图标）和刷新按钮。

## 6. 常见问题 (FAQ)

**Q: 为什么某些头像显示为首字母？**
A: 当网络环境不稳定或 X.com 图片服务响应超时，系统会自动降级显示用户名的首字母，以保证界面整洁。

**Q: 点击 "固定到工具栏" 没反应？**
A: 这是 Chrome 浏览器的原生行为，扩展程序无法直接控制。您可以尝试在 `chrome://flags` 中搜索 "Side panel navigation" 相关选项进行调整，或者直接在浏览器菜单中操作。

**Q: 只有打开 X.com 才能用吗？**
A: 不是。X-Tracker 使用全域 Side Panel 技术，支持在任何网页（如 Google, GitHub, 甚至空白页）上唤起并使用。

---
*Document Version 1.2 | Last Updated: 2026-01-28*
